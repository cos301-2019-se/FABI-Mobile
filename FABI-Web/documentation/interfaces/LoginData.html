<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>fabi-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">fabi-web documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>LoginData</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/api-connection.service.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#code">code</a>
                                </li>
                                <li>
                                        <a href="#message">message</a>
                                </li>
                                <li>
                                        <a href="#result">result</a>
                                </li>
                                <li>
                                        <a href="#title">title</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="code"></a>
                                        <span class="name"><b>code</b><a href="#code"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>code:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="message"></a>
                                        <span class="name"><b>message</b><a href="#message"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>message:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="result"></a>
                                        <span class="name"><b>result</b><a href="#result"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>result:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="title"></a>
                                        <span class="name"><b>title</b><a href="#title"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>title:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable, Type } from &#x27;@angular/core&#x27;;
import { HttpClient } from &#x27;@angular/common/http&#x27;;
import { HttpHeaders } from &#x27;@angular/common/http&#x27;;

const LoginUrl: string &#x3D; &#x27;https://fabi-web-app.herokuapp.com/authenticatePublicUser&#x27;;
const signupUrl: string &#x3D; &#x27;https://fabi-web-app.herokuapp.com/addPublicUser&#x27;;
const formUrl: string &#x3D; &#x27;https://fabi-web-app.herokuapp.com/submitForm&#x27;;


export interface LoginInfo {
  email: string;
  password: string;
}

interface UserInfo {
  loggedIn: boolean;
}

export interface FormData {
  name: string;
}

export interface LoginData {
  code: string;
  title: string;
  message: string;
  result: string;
}

export interface Error {
  code: string;
  title: string;
  message: string;
}

export interface SignupFormData {
  name: string;
  company: string;
  address: string;
  email: string;
  phone: string;
  password: string;
}

export interface ClientFormData {
  tree_species: string;
  number_samples: string;
  location1: string;
  location2: string;
  compartment: string;
  gps: string;
  date_collection: string;
  date_sent: string;
  type_soil: string;
  type_stems: string;
  type_leaves: string;
  type_roots: string;
  type_twigs: string;
  type_seedlings: string;
  type_media: string;
  type_water: string;
  symptom_wilt: string;
  symptom_stunting: string;
  symptom_leafspot: string;
  symptom_rootrot: string;
  symptom_dieback: string;
  symptom_cankers: string;
  symptom_death: string;
  symptom_wood: string;
  symptom_other: string;
  distribution_localized: string;
  distribution_scattered: string;
  distribution_general: string;
  conditions_affected: string;
  conditions_problem_noticed: string;
  conditions_date_planted: string;
  conditions_weather_disturbance: string;
  conditions_weather_prior: string;
  conditions_other: string;
  conditions_additional: string;
}

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class ApiConnectionService {
  private returnValue: LoginData;
  private err: Error;
  private authentication: UserInfo;
  loggedIn: boolean &#x3D; false; 
  sent: boolean &#x3D; false;

  constructor(private http: HttpClient) { }
  submitClientForm(data: FormData) {
    console.log(data);
  }

  isLoggedIn() {
    return this.loggedIn;
  }

  setLogin(){
    this.loggedIn &#x3D; true;
  }

  isSent() {
    return this.sent;
  }

  setSent(){
    this.sent &#x3D; true;
  }


  /////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                           SIGNUP
  /**
   * @description Send a POST request to the API to create a user on the system.
   *              Will be changed to only be accessablie by admin users
   * @param SignupFormData info retrieved stored in a JSON object.
   */
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
  signUp(info: SignupFormData) {
    //info.password &#x3D; this.SHA1(info.password);

    const options &#x3D; {
      method: &#x27;POST&#x27;,
      url: signupUrl,
      headers: {
        &#x27;cache-control&#x27;: &#x27;no-cache&#x27;,
        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;
      },
      body : info,
      json: true
    };
    console.log(options);

    return this.http.request(&#x27;POST&#x27;, LoginUrl, options);
  }
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                           LOGIN
  /**
   * @description Send a POST request to the API to authenticate a user.
   * @param LoginInfo username and email of client in a JSON object.
   */
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
  login(info: LoginInfo) {
    // info.password &#x3D; this.SHA1(info.password);
    const options &#x3D; {
      method: &#x27;POST&#x27;,
      url: LoginUrl,
      headers: {
        &#x27;cache-control&#x27;: &#x27;no-cache&#x27;,
        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
      },
      body : info,
      json: true
    };
    console.log(options);

    return this.http.request(&#x27;POST&#x27;, LoginUrl, options);

  }
  /////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                           SUBMIT CLIENT FORM
  /**
   * @description Send a POST request to the API to submit form data submitted by a client
   * @param ClientFormData : data submitted by client form in a JSON object
   */
/////////////////////////////////////////////////////////////////////////////////////////////////////////////
  submitForm(info: ClientFormData) {
    const options &#x3D; {
      method: &#x27;POST&#x27;,
      url: formUrl,
      headers: {
        &#x27;cache-control&#x27;: &#x27;no-cache&#x27;,
        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;
      },
      body : info,
      json: true
    };
    console.log(options);

    return this.http.request(&#x27;POST&#x27;, formUrl, options);
  }


  /**
   *
   *  Secure Hash Algorithm (SHA1)
   *  http://www.webtoolkit.info/
   *
   **/

  SHA1(msg) {

    function rotate_left(n,s) {
      var t4 &#x3D; ( n&lt;&lt;s ) | (n&gt;&gt;&gt;(32-s));
      return t4;
    };

    function lsb_hex(val) {
      var str&#x3D;&quot;&quot;;
      var i;
      var vh;
      var vl;

      for( i&#x3D;0; i&lt;&#x3D;6; i+&#x3D;2 ) {
        vh &#x3D; (val&gt;&gt;&gt;(i*4+4))&amp;0x0f;
        vl &#x3D; (val&gt;&gt;&gt;(i*4))&amp;0x0f;
        str +&#x3D; vh.toString(16) + vl.toString(16);
      }
      return str;
    };

    function cvt_hex(val) {
      var str&#x3D;&quot;&quot;;
      var i;
      var v;

      for( i&#x3D;7; i&gt;&#x3D;0; i-- ) {
        v &#x3D; (val&gt;&gt;&gt;(i*4))&amp;0x0f;
        str +&#x3D; v.toString(16);
      }
      return str;
    };


    function Utf8Encode(string) {
      string &#x3D; string.replace(/\r\n/g,&quot;\n&quot;);
      var utftext &#x3D; &quot;&quot;;

      for (var n &#x3D; 0; n &lt; string.length; n++) {

        var c &#x3D; string.charCodeAt(n);

        if (c &lt; 128) {
          utftext +&#x3D; String.fromCharCode(c);
        }
        else if((c &gt; 127) &amp;&amp; (c &lt; 2048)) {
          utftext +&#x3D; String.fromCharCode((c &gt;&gt; 6) | 192);
          utftext +&#x3D; String.fromCharCode((c &amp; 63) | 128);
        }
        else {
          utftext +&#x3D; String.fromCharCode((c &gt;&gt; 12) | 224);
          utftext +&#x3D; String.fromCharCode(((c &gt;&gt; 6) &amp; 63) | 128);
          utftext +&#x3D; String.fromCharCode((c &amp; 63) | 128);
        }

      }

      return utftext;
    };

    var blockstart;
    var i, j;
    var W &#x3D; new Array(80);
    var H0 &#x3D; 0x67452301;
    var H1 &#x3D; 0xEFCDAB89;
    var H2 &#x3D; 0x98BADCFE;
    var H3 &#x3D; 0x10325476;
    var H4 &#x3D; 0xC3D2E1F0;
    var A, B, C, D, E;
    var temp;

    msg &#x3D; Utf8Encode(msg);

    var msg_len &#x3D; msg.length;

    var word_array &#x3D; new Array();
    for( i&#x3D;0; i&lt;msg_len-3; i+&#x3D;4 ) {
      j &#x3D; msg.charCodeAt(i)&lt;&lt;24 | msg.charCodeAt(i+1)&lt;&lt;16 |
        msg.charCodeAt(i+2)&lt;&lt;8 | msg.charCodeAt(i+3);
      word_array.push( j );
    }

    switch( msg_len % 4 ) {
      case 0:
        i &#x3D; 0x080000000;
        break;
      case 1:
        i &#x3D; msg.charCodeAt(msg_len-1)&lt;&lt;24 | 0x0800000;
        break;

      case 2:
        i &#x3D; msg.charCodeAt(msg_len-2)&lt;&lt;24 | msg.charCodeAt(msg_len-1)&lt;&lt;16 | 0x08000;
        break;

      case 3:
        i &#x3D; msg.charCodeAt(msg_len-3)&lt;&lt;24 | msg.charCodeAt(msg_len-2)&lt;&lt;16 | msg.charCodeAt(msg_len-1)&lt;&lt;8	| 0x80;
        break;
    }

    word_array.push( i );

    while( (word_array.length % 16) !&#x3D; 14 ) word_array.push( 0 );

    word_array.push( msg_len&gt;&gt;&gt;29 );
    word_array.push( (msg_len&lt;&lt;3)&amp;0x0ffffffff );


    for ( blockstart&#x3D;0; blockstart&lt;word_array.length; blockstart+&#x3D;16 ) {

      for( i&#x3D;0; i&lt;16; i++ ) W[i] &#x3D; word_array[blockstart+i];
      for( i&#x3D;16; i&lt;&#x3D;79; i++ ) W[i] &#x3D; rotate_left(W[i-3] ^ W[i-8] ^ W[i-14] ^ W[i-16], 1);

      A &#x3D; H0;
      B &#x3D; H1;
      C &#x3D; H2;
      D &#x3D; H3;
      E &#x3D; H4;

      for( i&#x3D; 0; i&lt;&#x3D;19; i++ ) {
        temp &#x3D; (rotate_left(A,5) + ((B&amp;C) | (~B&amp;D)) + E + W[i] + 0x5A827999) &amp; 0x0ffffffff;
        E &#x3D; D;
        D &#x3D; C;
        C &#x3D; rotate_left(B,30);
        B &#x3D; A;
        A &#x3D; temp;
      }

      for( i&#x3D;20; i&lt;&#x3D;39; i++ ) {
        temp &#x3D; (rotate_left(A,5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) &amp; 0x0ffffffff;
        E &#x3D; D;
        D &#x3D; C;
        C &#x3D; rotate_left(B,30);
        B &#x3D; A;
        A &#x3D; temp;
      }

      for( i&#x3D;40; i&lt;&#x3D;59; i++ ) {
        temp &#x3D; (rotate_left(A,5) + ((B&amp;C) | (B&amp;D) | (C&amp;D)) + E + W[i] + 0x8F1BBCDC) &amp; 0x0ffffffff;
        E &#x3D; D;
        D &#x3D; C;
        C &#x3D; rotate_left(B,30);
        B &#x3D; A;
        A &#x3D; temp;
      }

      for( i&#x3D;60; i&lt;&#x3D;79; i++ ) {
        temp &#x3D; (rotate_left(A,5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) &amp; 0x0ffffffff;
        E &#x3D; D;
        D &#x3D; C;
        C &#x3D; rotate_left(B,30);
        B &#x3D; A;
        A &#x3D; temp;
      }

      H0 &#x3D; (H0 + A) &amp; 0x0ffffffff;
      H1 &#x3D; (H1 + B) &amp; 0x0ffffffff;
      H2 &#x3D; (H2 + C) &amp; 0x0ffffffff;
      H3 &#x3D; (H3 + D) &amp; 0x0ffffffff;
      H4 &#x3D; (H4 + E) &amp; 0x0ffffffff;

    }

    temp &#x3D; cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);

    return temp.toLowerCase();

  }

}
</code></pre>
    </div>
</div>






                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'LoginData.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
