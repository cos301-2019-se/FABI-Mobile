<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>fabi-web documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">fabi-web documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>errorLogInterface</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/Admin/reporting/reporting.component.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#code">code</a>
                                </li>
                                <li>
                                        <a href="#date">date</a>
                                </li>
                                <li>
                                        <a href="#details">details</a>
                                </li>
                                <li>
                                        <a href="#user">user</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="code"></a>
                                        <span class="name"><b>code</b><a href="#code"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>code:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="date"></a>
                                        <span class="name"><b>date</b><a href="#date"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>date:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="details"></a>
                                        <span class="name"><b>details</b><a href="#details"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>details:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="user"></a>
                                        <span class="name"><b>user</b><a href="#user"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>user:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import * as core from &#x27;@angular/core&#x27;;
import { FormBuilder } from &#x27;@angular/forms&#x27;;
import { MatSnackBar } from &#x27;@angular/material&#x27;;
import { Router } from &#x27;@angular/router&#x27;;
import html2canvas from &#x27;html2canvas&#x27;;
//These imports are used to created a downloadable PDF of the reports
import * as jspdf from &#x27;jspdf&#x27;;
import &#x27;jspdf-autotable&#x27;;
import { AuthenticationService } from &#x27;src/app/_services/authentication.service&#x27;;
import { CultureCollectionAPIService } from &#x27;../../_services/culture-collection-api.service&#x27;;
import { NotificationLoggingService } from &#x27;../../_services/notification-logging.service&#x27;;
import { UserManagementAPIService } from &#x27;../../_services/user-management-api.service&#x27;;


export interface userLogInterface {
  action: string;
  date: string;
  user1: string;
  user2: string;
}

export interface databaseLogInterface {
  action: string;
  date: string;
  user: string;
  details: string;
}

export interface accessLogInterface {
  details: string;
  date: string;
  user: string;
}

export interface errorLogInterface {
  code: string;
  date: string;
  details: string;
  user: string;
}

export interface requestReportInterface {
  user: string;
  requestor: string;
  cultureNumber: string;
  taxonName: string;
  referenceNumber: string;
  dateRequested: string;
  dateSubmitted: string;
}

export interface depositReportInterface {
  user: string;
  cultureNumber: string;
  name: string;
  collectedBy: string;
  dateCollected: string;
  isolatedBy: string;
  identifiedBy: string;
  dateSubmitted: string;
}

export interface revitalizationReportInterface {
  user: string;
  requestor: string;
  cultureNumber: string;
  cultureName: string;
  referenceNumber: string;
  dateRequested: string;
  dateReturned: string;
  dateSubmitted: string;
}

export interface StaffMember {
  fname: string;
  surname: string;
  email: string;
  id: string;
}

@core.Component({
  selector: &#x27;app-reporting&#x27;,
  templateUrl: &#x27;./reporting.component.html&#x27;,
  styleUrls: [&#x27;./reporting.component.scss&#x27;]
})
export class ReportingComponent implements core.OnInit {

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                          GLOBAL VARIABLES
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  /** Indicates if there are logs of type USER - @type {boolean} */
  userLogs: boolean &#x3D; false;
  /** Indicates if there are logs of type DBML - @type {boolean} */
  databaseLogs: boolean &#x3D; false;
  /** Indicates if there are logs of type ACCL - @type {boolean} */
  accessLogs: boolean &#x3D; false;
  /** Indicates if there are logs of type ERRL - @type {boolean} */
  errorLogs: boolean &#x3D; false;
  /** Indicates if there are logs of type REQUEST - @type {boolean} */
  requestLogs: boolean &#x3D; false;
  /** Indicates if there are logs of type DEPOSIT - @type {boolean} */
  depositLogs: boolean &#x3D; false;
  /** Indicates if there are logs of type REVITALIZATION - @type {boolean} */
  revitalizationLogs: boolean &#x3D; false;
  /** Indicates if the error report has been generated - @type {boolean} */
  errorReport: boolean &#x3D; false;
  /** Indicates if the request report has been generated - @type {boolean} */
  requestReport: boolean &#x3D; false;
  /** Indicates if the deposit report has been generated - @type {boolean} */
  depositReport: boolean &#x3D; false;
  /** Indicates if the revitalization report has been generated - @type {boolean} */
  revitalizationReport: boolean &#x3D; false;
  /** The current date in string format - @type {string} */
  date: string;
  /** Array holding the user logs - @type {userLogInterface} */
  userLogsArray: userLogInterface[] &#x3D; [];
  /** Array holding the database logs - @type {databaseLogInterface} */
  databaseLogsArray: databaseLogInterface[] &#x3D; [];
  /** Array holding the access logs - @type {accessLogInterface} */
  accessLogsArray: accessLogInterface[] &#x3D; [];
  /** Array holding the error logs - @type {errorLogInterface} */
  errorLogsArray: errorLogInterface[] &#x3D; [];
  /** Array holding the request logs - @type {requestReportInterface} */
  requestLogsArray: requestReportInterface[] &#x3D; [];
  /** Array holding the deposit logs - @type {depositReportInterface} */
  depositLogsArray: depositReportInterface[] &#x3D; [];
  /** Array holding the revitalization logs - @type {revitalizationReportInterface} */
  revitalizationLogsArray: revitalizationReportInterface[] &#x3D; [];

  /** Holds the table element (errorReportPDF) from the HTML page - @type {ElementRef} */
  @core.ViewChild(&quot;errorReportPDF&quot;) errorReportPDF: core.ElementRef;
  /** Holds the table element (requestReportPDF) from the HTML page - @type {ElementRef} */
  @core.ViewChild(&quot;requestReportPDF&quot;) requestReportPDF: core.ElementRef;
  /** Holds the table element (depositReportPDF) from the HTML page - @type {ElementRef} */
  @core.ViewChild(&quot;depositReportPDF&quot;) depositReportPDF: core.ElementRef;
  /** Holds the table element (revitalizationReportPDF) from the HTML page - @type {ElementRef} */
  @core.ViewChild(&quot;revitalizationReportPDF&quot;) revitalizationReportPDF: core.ElementRef;

  /** Indicates if the notifications tab is hidden/shown - @type {boolean} */
  notificationsTab: boolean &#x3D; false;
  /** Indicates if the profile tab is hidden/shown - @type {boolean} */
  profileTab: boolean &#x3D; false;
  /** Indicates if the save button is hidden/shown on the profile tab- @type {boolean} */
  saveBtn: boolean &#x3D; false;
  /** Indicates if the confirm password tab is hidden/shown on the profile tab - @type {boolean} */
  confirmPasswordInput: boolean &#x3D; false;
  /** Indicates if the help tab is hidden/shown - @type {boolean} */
  helpTab: boolean &#x3D; false;
  /** Indicates if the reporting tab is hidden/shown - @type {boolean} */
  reportingTab: boolean &#x3D; false;
  /** Indicates if the log tab is hidden/shown - @type {boolean} */
  logsTab: boolean &#x3D; false;
  /** The details of the user currently logged in -  @type {any} */
  currentUser: any;
  /** Object array for holding the staff members -  @type {StaffMember[]} */
  staff: StaffMember[] &#x3D; [];
  /** Stores the data table -  @type {string} */
  public tableWidget: any;
  /** The search item the user is looking for in the table -  @type {string} */
  public searchItem: string &#x3D; &quot;&quot;;
  /** The search item the user is looking for in the table -  @type {string} */
  public searchReports: string &#x3D; &quot;&quot;;


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                       CONSTRUCTOR
  /**
   * Creates an instance of ReportingComponent.
   * 
   * @param {NotificationLoggingService} notificationLoggingService For calling the Notification Logging API service
   * @param {CultureCollectionAPIService} cultureCollectionService For calling the Culture Collection API Service
   * @param {UserManagementAPIService} userManagementService For calling the User Management API Service
   * @param {AuthenticationService} authService for calling the *authentication* service
   * @param {Router} router
   * @param {core.Renderer2} renderer Used for creating the PDF documents to download
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  constructor(
    private notificationLoggingService: NotificationLoggingService,
    private userManagementService: UserManagementAPIService,
    private renderer: core.Renderer2,
    private authService: AuthenticationService,
    private router: Router,
    private cultureCollectionService: CultureCollectionAPIService,
    private formBuilder: FormBuilder,
    private snackBar: MatSnackBar
  ) { }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                            NG ON INIT  
  /**
   * This function is called when the page loads
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ngOnInit() {
    this.currentUser &#x3D; this.authService.getCurrentSessionValue.user;
    this.getAllStaff();

    //Calling the neccessary functions as the page loads
    var currentDate &#x3D; new Date();
    this.date &#x3D; (&#x27;0&#x27; + currentDate.getDate()).slice(-2) + &#x27;/&#x27; + (currentDate.getMonth() + 1) + &#x27;/&#x27; + currentDate.getFullYear();
    this.loadAllLogs();

    //Generate first displayed report so that it is ready to load
    this.generateRequestReport();

    //Generate first displayed log so that it is ready to load
    this.setUserLogTable();
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                    GET ALL STAFF
  /**
   *  This function will be used to get all the staff members of FABI and load them into an array
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  getAllStaff() {
    //Subscribing to the UserManagementAPIService to get a list containing all the FABI members
    this.userManagementService.getAllFABIStaff().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D;&#x3D; true) {
        var data &#x3D; response.data.qs.staff;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempStaff: StaffMember &#x3D; { fname: data[i].fname, surname: data[i].surname, email: data[i].email, id: data[i].id };
          this.staff.push(tempStaff);
        }
      }
      else {
        //Error handling
      }
    });
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  LOAD USER DETAILS
  /**
   *  This function will be called so that the information of a specific user can be fetched
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  loadUserDetails(userID: string) {
    var person &#x3D; &#x27;&#x27;;
    for (var i &#x3D; 0; i &lt; this.staff.length; i++) {
      if (this.staff[i].id &#x3D;&#x3D; userID) {
        person &#x3D; this.staff[i].fname + &#x27; &#x27; + this.staff[i].surname;
      }
    }

    return person
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  LOAD ALL LOGS
  /**
   *  This function will be called so that all the logs can be fetched and inserted into a table
   *  on the HTML page.
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  loadAllLogs() {
    this.getAllStaff();

    //Loading the &#x27;USER&#x27; logs
    this.notificationLoggingService.getAllUserLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        //Temporarily holds the data returned from the API call
        var data &#x3D; response.data.content.data.Logs;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          // var tempArray: any &#x3D; [];
          var tempArray: userLogInterface &#x3D; { action: &quot;&quot;, date: &quot;&quot;, user1: &quot;&quot;, user2: &quot;&quot; };

          if (data[i].action &#x3D;&#x3D; &quot;/createOrganization&quot;) {
            tempArray.action &#x3D; &quot;New organization was added&quot;;

            tempArray.date &#x3D; this.getDate(data[i].dateString);

            //Fetch user information
            tempArray.user1 &#x3D; this.loadUserDetails(data[i].details);
            tempArray.user2 &#x3D; data[i].org2;
          }
          else if (data[i].action &#x3D;&#x3D; &quot;/removeOrg&quot;) {
            tempArray.action &#x3D; &quot;Organization removed&quot;;

            tempArray.date &#x3D; this.getDate(data[i].dateString);

            //Fetch user information
            tempArray.user1 &#x3D; this.loadUserDetails(data[i].details);
            tempArray.user2 &#x3D; data[i].org2;
          }
          else if (data[i].action &#x3D;&#x3D; &#x27;/addStaff&#x27;) {
            tempArray.action &#x3D; &#x27;Added new user&#x27;;

            tempArray.date &#x3D; this.getDate(data[i].dateString);

            //Fetch user information
            tempArray.user1 &#x3D; this.loadUserDetails(data[i].details);
            tempArray.user2 &#x3D; this.loadUserDetails(data[i].user);
          }
          else if (data[i].action &#x3D;&#x3D; &#x27;/updateStaffMember&#x27;) {
            tempArray.action &#x3D; &#x27;Updated user details&#x27;;

            tempArray.date &#x3D; this.getDate(data[i].dateString);

            //Fetch user information
            tempArray.user1 &#x3D; this.loadUserDetails(data[i].details);
            tempArray.user2 &#x3D; this.loadUserDetails(data[i].user);
          }
          else if (data[i].action &#x3D;&#x3D; &#x27;/removeStaff&#x27;) {
            tempArray.action &#x3D; &#x27;Removed user from system&#x27;;

            tempArray.date &#x3D; this.getDate(data[i].dateString);

            //Fetch user information
            tempArray.user1 &#x3D; this.loadUserDetails(data[i].details);
            tempArray.user2 &#x3D; this.loadUserDetails(data[i].user);
          }
          else if (data[i].action &#x3D;&#x3D; &quot;/udateStaffDatabaseAccess&quot; || data[i].action &#x3D;&#x3D; &quot;/updateStaffDatabaseAccess&quot;) {
            tempArray.action &#x3D; &#x27;User database access updated&#x27;;

            tempArray.date &#x3D; this.getDate(data[i].dateString);

            //Fetch user information
            tempArray.user1 &#x3D; this.loadUserDetails(data[i].details);
            tempArray.user2 &#x3D; this.loadUserDetails(data[i].user);
          }

          this.userLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });

    //Loading the &#x27;DBML&#x27; logs
    this.notificationLoggingService.getAllDatabaseManagementLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        //Temporarily holds the data returned from the API call
        var data &#x3D; response.data.content.data.Logs;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: databaseLogInterface &#x3D; { action: &quot;&quot;, date: &quot;&quot;, user: &quot;&quot;, details: &quot;&quot; };

          if (data[i].action &#x3D;&#x3D; &#x27;/createDatabase&#x27; || data[i].action &#x3D;&#x3D; &#x27;C&#x27;) {
            tempArray.action &#x3D; &#x27;Added new database&#x27;;
          }
          else if (data[i].action &#x3D;&#x3D; &#x27;/addDoc&#x27;) {
            tempArray.action &#x3D; &#x27;Document added to database&#x27;;
          }
          else if (data[i].action &#x3D;&#x3D; &#x27;/porting&#x27;) {
            tempArray.action &#x3D; &#x27;Database was ported&#x27;;
          }
          else if (data[i].action &#x3D;&#x3D; &#x27;/retrieveDatabase&#x27;) {
            tempArray.action &#x3D; &#x27;Database was retrieved&#x27;;
          }

          tempArray.date &#x3D; this.getDate(data[i].dateString);

          //Fetch user information
          tempArray.user &#x3D; this.loadUserDetails(data[i].user);

          tempArray.details &#x3D; data[i].details;
          this.databaseLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });


    //Loading the &#x27;ACCL&#x27; logs
    this.notificationLoggingService.getAllAccessLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        //Temporarily holds the data returned from the API call
        var data &#x3D; response.data.content.data.Logs;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: accessLogInterface &#x3D; { details: &#x27;&#x27;, date: &#x27;&#x27;, user: &#x27;&#x27; };

          tempArray.details &#x3D; data[i].details;
          tempArray.date &#x3D; this.getDate(data[i].dateString);

          //Fetch user information
          tempArray.user &#x3D; this.loadUserDetails(data[i].user);

          this.accessLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });


    //Loading the &#x27;ERRL&#x27; logs
    this.notificationLoggingService.getAllErrorLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        //Temporarily holds the data returned from the API call
        var data &#x3D; response.data.content.data.Logs;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: errorLogInterface &#x3D; { code: &#x27;&#x27;, date: &#x27;&#x27;, details: &#x27;&#x27;, user: &#x27;&#x27; };

          tempArray.code &#x3D; data[i].statusCode;
          tempArray.date &#x3D; this.getDate(data[i].dateString);
          tempArray.details &#x3D; data[i].details;

          //Fetch user information
          tempArray.user &#x3D; this.loadUserDetails(data[i].user);

          this.errorLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });

    //Determines if there are user logs to load or not
    if (this.userLogsArray !&#x3D; null) {
      this.userLogs &#x3D; true;
    }

    //Determines if there are database logs to load or not
    if (this.databaseLogsArray !&#x3D; null) {
      this.databaseLogs &#x3D; true;
    }

    //Determines if there are access logs to load or not
    if (this.accessLogsArray !&#x3D; null) {
      this.accessLogs &#x3D; true;
    }

    //Determines if there are error logs to load or not
    if (this.errorLogsArray !&#x3D; null) {
      this.errorLogs &#x3D; true;
    }
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  GENERATE ERROR REPORT
  /**
   *  This function will be used to generate the error report and display it on screen
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  generateErrorReport() {
    this.requestReport &#x3D; false;
    this.depositReport &#x3D; false;
    this.revitalizationReport &#x3D; false;
    this.errorReport &#x3D; true;

    //Loading the &#x27;ERRL&#x27; logs
    this.notificationLoggingService.getAllErrorLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        var data &#x3D; response.data.content.data.Logs;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: errorLogInterface &#x3D; { code: &#x27;&#x27;, date: &#x27;&#x27;, details: &#x27;&#x27;, user: &#x27;&#x27; };

          tempArray.code &#x3D; data[i].statusCode;
          tempArray.date &#x3D; this.getDate(data[i].dateString);
          tempArray.details &#x3D; data[i].details;

          //Fetch user information
          tempArray.user &#x3D; this.loadUserDetails(data[i].user);

          this.errorLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  DOWNLOAD ERROR REPORT
  /**
   *  This function will be used to download the error report that is displayed on screen as a PDF document.
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  downloadErrorReport() {
    var report &#x3D; this.errorReportPDF.nativeElement;
    html2canvas(report).then(canvas &#x3D;&gt; {
      var imageWidth &#x3D; 180;
      var pageHeight &#x3D; 295;
      var imageHeight &#x3D; canvas.height * imageWidth / canvas.width;
      var heightLeft &#x3D; imageHeight;

      const contentDataURL &#x3D; canvas.toDataURL(&#x27;image/png&#x27;);
      let pdf &#x3D; new jspdf(&#x27;p&#x27;, &#x27;mm&#x27;, &#x27;a4&#x27;);
      var position &#x3D; 0;
      pdf.addImage(contentDataURL, &#x27;PNG&#x27;, 0, position, imageWidth, imageHeight);
      pdf.save(&#x27;Error_Report.pdf&#x27;);
    });
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  GENERATE REQUEST REPORT
  /**
   *  This function will be used to generate the request report and display it on screen
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  generateRequestReport() {
    this.errorReport &#x3D; false;
    this.depositReport &#x3D; false;
    this.requestReport &#x3D; true;
    this.revitalizationReport &#x3D; false;

    //Loading the Request forms
    this.cultureCollectionService.getAllRequestLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        var data &#x3D; response.data.qs.forms;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: requestReportInterface &#x3D; {
            user: &#x27;&#x27;, requestor: &#x27;&#x27;, cultureNumber: &#x27;&#x27;, taxonName: &#x27;&#x27;,
            referenceNumber: &#x27;&#x27;, dateRequested: &#x27;&#x27;, dateSubmitted: &#x27;&#x27;
          };

          tempArray.user &#x3D; this.loadUserDetails(data[i].userID);
          tempArray.requestor &#x3D; data[i].requestor;
          tempArray.cultureNumber &#x3D; data[i].cultureNumber;
          tempArray.taxonName &#x3D; data[i].taxonName;
          tempArray.referenceNumber &#x3D; data[i].referenceNumber;
          tempArray.dateRequested &#x3D; data[i].dateRequested;
          tempArray.dateSubmitted &#x3D; data[i].dateSubmitted;

          this.requestLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });

    if (this.requestLogsArray !&#x3D; null) {
      this.requestLogs &#x3D; true;
    }
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  DOWNLOAD REQUEST REPORT
  /**
   *  This function will be used to download the request report that is displayed on screen as a PDF document.
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  downloadRequestReport() {
    var report &#x3D; this.requestReportPDF.nativeElement;
    html2canvas(report).then(canvas &#x3D;&gt; {
      var imageWidth &#x3D; 180;
      var pageHeight &#x3D; 295;
      var imageHeight &#x3D; canvas.height * imageWidth / canvas.width;
      var heightLeft &#x3D; imageHeight;

      const contentDataURL &#x3D; canvas.toDataURL(&#x27;image/png&#x27;);
      let pdf &#x3D; new jspdf(&#x27;p&#x27;, &#x27;mm&#x27;, &#x27;a4&#x27;);
      var position &#x3D; 0;
      pdf.addImage(contentDataURL, &#x27;PNG&#x27;, 0, position, imageWidth, imageHeight);
      pdf.save(&#x27;Request_Report.pdf&#x27;);
    });
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  GENERATE DEPOSIT REPORT
  /**
   *  This function will be used to generate the deposit report and display it on screen
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  generateDepositReport() {
    this.errorReport &#x3D; false;
    this.depositReport &#x3D; true;
    this.requestReport &#x3D; false;
    this.revitalizationReport &#x3D; false;

    //Loading the Deposit forms
    this.cultureCollectionService.getAllDepositLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        var data &#x3D; response.data.qs.forms;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: depositReportInterface &#x3D; {
            user: &#x27;&#x27;, cultureNumber: &#x27;&#x27;, name: &#x27;&#x27;, collectedBy: &#x27;&#x27;,
            dateCollected: &#x27;&#x27;, isolatedBy: &#x27;&#x27;, identifiedBy: &#x27;&#x27;, dateSubmitted: &#x27;&#x27;
          };

          tempArray.user &#x3D; this.loadUserDetails(data[i].userID);
          tempArray.cultureNumber &#x3D; data[i].cmwCultureNumber;
          tempArray.name &#x3D; data[i].name;

          if (!data[i].collected_by) {
            tempArray.collectedBy &#x3D; data[i].collectedBy;
          }
          else {
            tempArray.collectedBy &#x3D; data[i].collected_by;
          }

          tempArray.dateCollected &#x3D; data[i].dateCollected;
          tempArray.isolatedBy &#x3D; data[i].isolatedBy;
          tempArray.identifiedBy &#x3D; data[i].identifiedBy;
          tempArray.dateSubmitted &#x3D; data[i].dateSubmitted;

          this.depositLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });

    if (this.depositLogsArray !&#x3D; null) {
      this.depositLogs &#x3D; true;
    }
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  DOWNLOAD DEPOSIT REPORT
  /**
   *  This function will be used to download the deposit report that is displayed on screen as a PDF document.
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  downloadDepositReport() {
    var report &#x3D; this.depositReportPDF.nativeElement;
    html2canvas(report).then(canvas &#x3D;&gt; {
      var imageWidth &#x3D; 180;
      var pageHeight &#x3D; 295;
      var imageHeight &#x3D; canvas.height * imageWidth / canvas.width;
      var heightLeft &#x3D; imageHeight;

      const contentDataURL &#x3D; canvas.toDataURL(&#x27;image/png&#x27;);
      let pdf &#x3D; new jspdf(&#x27;p&#x27;, &#x27;mm&#x27;, &#x27;a4&#x27;);
      var position &#x3D; 0;
      pdf.addImage(contentDataURL, &#x27;PNG&#x27;, 0, position, imageWidth, imageHeight);
      pdf.save(&#x27;Deposit_Report.pdf&#x27;);
    });
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  GENERATE REVITALIZATION REPORT
  /**
   *  This function will be used to generate the revitalization report and display it on screen
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  generateRevitalizationReport() {
    this.requestReport &#x3D; false;
    this.depositReport &#x3D; false;
    this.errorReport &#x3D; false;
    this.revitalizationReport &#x3D; true;

    //Loading the Revitalization forms
    this.cultureCollectionService.getAllRevitalizationLogs().subscribe((response: any) &#x3D;&gt; {
      if (response.success &#x3D; true) {
        var data &#x3D; response.data.qs.forms;

        for (var i &#x3D; 0; i &lt; data.length; i++) {
          var tempArray: revitalizationReportInterface &#x3D; {
            user: &#x27;&#x27;, requestor: &#x27;&#x27;, cultureNumber: &#x27;&#x27;, cultureName: &#x27;&#x27;,
            referenceNumber: &#x27;&#x27;, dateRequested: &#x27;&#x27;, dateReturned: &#x27;&#x27;, dateSubmitted: &#x27;&#x27;
          };

          tempArray.user &#x3D; this.loadUserDetails(data[i].userID);
          tempArray.requestor &#x3D; data[i].requestor;
          tempArray.cultureNumber &#x3D; data[i].cultureNumber;
          tempArray.cultureName &#x3D; data[i].currentName;
          tempArray.referenceNumber &#x3D; data[i].referenceNumber;
          tempArray.dateRequested &#x3D; data[i].dateRequested;
          tempArray.dateReturned &#x3D; data[i].dateReturned;
          tempArray.dateSubmitted &#x3D; data[i].dateSubmitted;

          this.revitalizationLogsArray.push(tempArray);
        }
      }
      else {
        //Error handling
      }
    });

    if (this.revitalizationLogsArray !&#x3D; null) {
      this.revitalizationLogs &#x3D; true;
    }
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                  DOWNLOAD REVITALIZATION REPORT
  /**
   *  This function will be used to download the revitalization report that is displayed on screen as a PDF document.
   *  @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  downloadRevitalizationReport() {
    var report &#x3D; this.revitalizationReportPDF.nativeElement;
    html2canvas(report).then(canvas &#x3D;&gt; {
      var imageWidth &#x3D; 157;
      var pageHeight &#x3D; 295;
      var imageHeight &#x3D; canvas.height * imageWidth / canvas.width;
      var heightLeft &#x3D; imageHeight;

      const contentDataURL &#x3D; canvas.toDataURL(&#x27;image/png&#x27;);
      let pdf &#x3D; new jspdf(&#x27;p&#x27;, &#x27;mm&#x27;, &#x27;a4&#x27;);
      var position &#x3D; 0;
      pdf.addImage(contentDataURL, &#x27;PNG&#x27;, 0, position, imageWidth, imageHeight);
      pdf.save(&#x27;Revitalization_Report.pdf&#x27;);
    });
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                        GET DATE
  /**
   *  This function will put the string date provided into a more readable format for the notifications
   * @param {string} date The date of the log
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  getDate(date: string) {
    var tempDate &#x3D; (date).split(&#x27; &#x27;);
    var newDate &#x3D; &#x27;&#x27;;

    newDate +&#x3D; tempDate[2];

    if (tempDate[0] &#x3D;&#x3D; &#x27;Mon&#x27;) {
      newDate +&#x3D; &#x27; Monday &#x27;;
    }
    else if (tempDate[0] &#x3D;&#x3D; &#x27;Tue&#x27; || tempDate[0] &#x3D;&#x3D; &#x27;Tu&#x27; || tempDate[0] &#x3D;&#x3D; &#x27;Tues&#x27;) {
      newDate +&#x3D; &#x27; Tuesday &#x27;;
    }
    else if (tempDate[0] &#x3D;&#x3D; &#x27;Wed&#x27;) {
      newDate +&#x3D; &#x27; Wednesday &#x27;;
    }
    else if (tempDate[0] &#x3D;&#x3D; &#x27;Thu&#x27; || tempDate[0] &#x3D;&#x3D; &#x27;Thur&#x27; || tempDate[0] &#x3D;&#x3D; &#x27;Thurs&#x27;) {
      newDate +&#x3D; &#x27; Thursday &#x27;;
    }
    else if (tempDate[0] &#x3D;&#x3D; &#x27;Fri&#x27;) {
      newDate +&#x3D; &#x27; Friday &#x27;;
    }
    else if (tempDate[0] &#x3D;&#x3D; &#x27;Sat&#x27;) {
      newDate +&#x3D; &#x27; Saturday &#x27;;
    }
    else if (tempDate[0] &#x3D;&#x3D; &#x27;Sun&#x27;) {
      newDate +&#x3D; &#x27; Sunday &#x27;;
    }

    if (tempDate[1] &#x3D;&#x3D; &#x27;Jan&#x27;) {
      newDate +&#x3D; &#x27;January&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Feb&#x27;) {
      newDate +&#x3D; &#x27;February&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Mar&#x27;) {
      newDate +&#x3D; &#x27;March&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Apr&#x27;) {
      newDate +&#x3D; &#x27;April&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Jun&#x27;) {
      newDate +&#x3D; &#x27;June&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Jul&#x27;) {
      newDate +&#x3D; &#x27;July&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Aug&#x27;) {
      newDate +&#x3D; &#x27;August&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Sep&#x27; || tempDate[1] &#x3D;&#x3D; &#x27;Sept&#x27;) {
      newDate +&#x3D; &#x27;September&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Oct&#x27;) {
      newDate +&#x3D; &#x27;October&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Nov&#x27;) {
      newDate +&#x3D; &#x27;November&#x27;;
    }
    else if (tempDate[1] &#x3D;&#x3D; &#x27;Dec&#x27;) {
      newDate +&#x3D; &#x27;December&#x27;;
    }

    newDate +&#x3D; &#x27; &#x27; + tempDate[3];

    return newDate;
  }


  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                            LOGOUT 
  /**
   * This function will log the user out of the web application and clear the authentication data stored in the local storage
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  logout() {
    this.authService.logoutUser();
    this.router.navigate([&#x27;/login&#x27;]);
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                       TOGGLE NOTIFICATIONS 
  /**
   * This function will toggle the display of the notifications side panel
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  toggleNotificationsTab() {
    this.notificationsTab &#x3D; !this.notificationsTab;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                            TOGGLE PROFILE 
  /**
   * This function will toggle the display of the profile side panel
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  toggleProfileTab() {
    this.profileTab &#x3D; !this.profileTab;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                      DISPLAY PROFILE SAVE BUTTON 
  /**
   * This function will display the save button option if any details in the profile have been altered
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  displayProfileSaveBtn() {
    this.saveBtn &#x3D; true;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                    DISPLAY PASSWORD CONFIRM INPUT 
  /**
   * This function will display the confirm password input field in the user&#x27;s password was altered
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  displayConfirmPasswordInput() {
    this.confirmPasswordInput &#x3D; true;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                            TOGGLE HELP 
  /**
   * This function will toggle the display of the help side panel
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  toggleHelpTab() {
    this.helpTab &#x3D; !this.helpTab;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                            TOGGLE REPORTING 
  /**
   * This function will toggle the display of the reporting tab section
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  toggleReportSection() {
    this.reportingTab &#x3D; !this.reportingTab;
    this.logsTab &#x3D; false;

    //Generate the Request report so that it is ready to be displayed when the report menu option is clicked
    this.requestLogs &#x3D; true;
    this.userLogs &#x3D; false;

    //Display request report immediately since it is the first active tab
    this.requestReport &#x3D; true;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                            TOGGLE LOG 
  /**
   * This function will toggle the display of the logs tab section
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  toggleLogSection() {
    this.logsTab &#x3D; !this.logsTab;
    this.reportingTab &#x3D; false;
    this.requestLogs &#x3D; false;
    this.requestReport &#x3D; false;

    this.userLogs &#x3D; true;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                         SET USER LOGS TABLE 
  /**
   * This function will display the user logs table
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  setUserLogTable() {
    this.userLogs &#x3D; true;
    this.databaseLogs &#x3D; false;
    this.accessLogs &#x3D; false;
    this.errorLogs &#x3D; false;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                      SET DATABASE LOGS TABLE 
  /**
   * This function will display the database logs table
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  setDatabaseLogTable() {
    this.userLogs &#x3D; false;
    this.databaseLogs &#x3D; true;
    this.accessLogs &#x3D; false;
    this.errorLogs &#x3D; false;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                         SET ACCESS LOGS TABLE 
  /**
   * This function will display the access logs table
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  setAccessLogTable() {
    this.userLogs &#x3D; false;
    this.databaseLogs &#x3D; false;
    this.accessLogs &#x3D; true;
    this.errorLogs &#x3D; false;
  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  //                                                         SET ERROR LOGS TABLE 
  /**
   * This function will display the error logs table
   * 
   * @memberof ReportingComponent
   */
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  setErrorLogTable() {
    this.userLogs &#x3D; false;
    this.databaseLogs &#x3D; false;
    this.accessLogs &#x3D; false;
    this.errorLogs &#x3D; true;
  }
}
</code></pre>
    </div>
</div>






                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'errorLogInterface.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
