<div class="container">

  <!--Nav Section-->
  <div class="nav">

    <section class="top-nav">
      <h1>Database Management</h1>
      <a id="dashboard_menu_link" routerLink="/admin-dashboard"><i class="fas fa-home"></i>Home</a>
      <a id="user_management" routerLink="/staff-handler"><i class="fas fa-id-card"></i>Staff</a>
      <a id="organization_management" routerLink="/organization-handler"><i
          class="fas fa-building"></i>Organizations</a>
      <a id="diagnostic_clinic_management" routerLink="/clinic-handler"><i class="fas fa-stethoscope"></i>Diagnostic
        Clinic</a>
      <a id="database_management" routerLink="/database-handler"><i class="fas fa-database"></i>Databases</a>
      <a id="profile_menu_link" routerLink="/"><i class="fas fa-user-circle"></i>Profile</a>
      <a id="help_menu_link" routerLink="/"><i class="fas fa-question"></i>Help</a>
      <a id="settings_menu_link" routerLink="/"><i class="fas fa-cogs"></i>Settings</a>
      <a href="" id="notification-bell"><i class="fas fa-bell"></i>Notifications</a>
    </section>

    <section class="bottom-nav">
      <a id="logout_menu_link" routerLink="/"><i class="fas fa-sign-out-alt"></i>Logout</a>
    </section>
    <a href="" id="menu"><i class="fas fa-bars"></i></a>
  </div>

  <!--Database Handler Content-->
  <div class="content">
    <!-- <div class="color-accent">
      <h1>Database Management</h1>
    </div> -->

    <div class="database-management">
      <!--Tab Menu-->
      <mat-tab-group animationDuration="1000ms">

        <!--Porting Tab Option-->
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="fas fa-database"></i>
            Add Database
          </ng-template>
          <div class="tab-content" id="add_new_database_form" ng-app="portApp" ngController="previewCtrl">
            <h2>Add Database via Porting</h2>
            <br />
            <label>Database name</label><input type='text' id='fileInput1' class="btn.btn-default" #pDBname >
            <input type='file' (change)=submitCSV(input) id='fileInput' class="btn.btn-default" #input>
            <br/>
            <h2>Reverse Porting</h2>
            <br />
            <label>Database name</label><input type='text' id='fileInput2' class="btn.btn-default" #rpDBname >
            <button type="button" (click)="getCSV()" > Download CSV file</button>

            <table id="previewTable" >
              <thead>
                <tr>
                  
                </tr>
              </thead>
              <tbody>
                
              </tbody>
            </table>
          

          </div>
          <p *ngIf="loading" style="color: black;">Porting File...</p>
        </mat-tab>

        <!--View Database Tab Option-->
        <mat-tab>
          <ng-template mat-tab-label>
            <i class="fas fa-database"></i>
            View Database
          </ng-template>
          <div class="tab-content">
            <h2>View Database</h2>
            <br />
            <!--Table of all databases-->
            <div class="staff-table">

              <!--Dropdown for Database selection-->
              <mat-form-field>
                <mat-label>Database</mat-label>
                <mat-select [(ngModel)]="selectedDatabase" id="database">
                  <mat-option>--</mat-option>
                  <mat-option *ngFor="let database of databases" [value]="database.name">
                    {{database.name}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <button (click)="viewDatabase()">View Data</button>
              <br />

              <!--Search Filter for the Table-->
              <div class="search-field" *ngIf="dataSource">
                <mat-form-field>
                  <input matInput type="text" id="search" onkeyup="searchFunction()" title="Search"><br />
                  <mat-placeholder class="placeholder">Search Database</mat-placeholder>
                  <br />
                </mat-form-field>
              </div>
              <br />
              <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" id="info"  *ngIf="dataSource">
  
                <ng-container *ngFor="let column of columns" matColumnDef="{{column.name}}">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>{{column.name}}</th>
                  <td mat-cell *matCellDef="let element"> {{element[column.name]}} </td>
                </ng-container>

                <!-- Update Column -->
                <ng-container matColumnDef="Update" *ngIf="databasePrivileges.update == true">
                  <th mat-header-cell *matHeaderCellDef> </th>
                  <td mat-cell *matCellDef="let element"><button class="btn btn-default">Update</button></td>
                </ng-container>

                <!-- Remove Column -->
                <ng-container matColumnDef="Remove" *ngIf="databasePrivileges.delete == true">
                  <th mat-header-cell *matHeaderCellDef>  </th>
                  <td mat-cell *matCellDef="let element"> <span style="color: darkred">Delete</span> </td>
                </ng-container>
            
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>

              <button class="btn btn-default" *ngIf="databasePrivileges.create == true">Add Entry</button>

              <!--Pagination Setup-->
              <!-- <mat-paginator [pageSizeOptions]="[5,10,25]" showFirstLastButtons *ngIf="dataSource"></mat-paginator> -->
            </div>
          

          </div>
        </mat-tab>

      </mat-tab-group>
    </div>
  </div>

</div>